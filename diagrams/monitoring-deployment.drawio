<mxfile host="app.diagrams.net" agent="Antigravity AI" version="24.0.0">
  <diagram name="Deployment Architecture" id="deployment">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3000" pageHeight="2000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="LGTM Stack - Production Deployment Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=28;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="30" width="1600" height="50" as="geometry" />
        </mxCell>
        
        <!-- Network Label -->
        <mxCell id="network-label" value="CORPORATE NETWORK: 10.170.100.0/24" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="900" y="100" width="1200" height="40" as="geometry" />
        </mxCell>
        
        <!-- ========== MONITORING SERVER ========== -->
        <mxCell id="monitoring-server-box" value="MONITORING SERVER" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#82B366;fontSize=20;fontStyle=1;verticalAlign=top;align=center;" vertex="1" parent="1">
          <mxGeometry x="200" y="180" width="1200" height="720" as="geometry" />
        </mxCell>
        
        <mxCell id="server-info" value="Server: monitor-01&lt;br&gt;IP: 10.170.100.X&lt;br&gt;OS: Ubuntu 22.04 LTS&lt;br&gt;RAM: 16 GB&lt;br&gt;CPU: 8 cores&lt;br&gt;Disk: 500 GB SSD" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="220" width="200" height="100" as="geometry" />
        </mxCell>
        
        <!-- Docker Containers -->
        <mxCell id="docker-label" value="DOCKER CONTAINERS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="220" width="300" height="30" as="geometry" />
        </mxCell>
        
        <!-- Container: Prometheus -->
        <mxCell id="c-prometheus" value="prometheus&lt;br&gt;&lt;br&gt;Image: prom/prometheus:latest&lt;br&gt;Port: 9090:9090&lt;br&gt;Volume: prometheus-data:/prometheus&lt;br&gt;Config: ./prometheus:/etc/prometheus&lt;br&gt;&lt;br&gt;Command:&lt;br&gt;--storage.tsdb.retention.time=15d&lt;br&gt;--web.enable-lifecycle" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6E6;strokeColor=#B85450;fontSize=11;align=left;" vertex="1" parent="1">
          <mxGeometry x="240" y="340" width="260" height="180" as="geometry" />
        </mxCell>
        
        <!-- Container: Grafana -->
        <mxCell id="c-grafana" value="grafana&lt;br&gt;&lt;br&gt;Image: grafana/grafana:latest&lt;br&gt;Port: 3000:3000&lt;br&gt;Volume: grafana-data:/var/lib/grafana&lt;br&gt;Config: ./grafana/provisioning&lt;br&gt;&lt;br&gt;Env:&lt;br&gt;GF_SECURITY_ADMIN_PASSWORD" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#82B366;fontSize=11;align=left;" vertex="1" parent="1">
          <mxGeometry x="540" y="340" width="260" height="180" as="geometry" />
        </mxCell>
        
        <!-- Container: Loki -->
        <mxCell id="c-loki" value="loki&lt;br&gt;&lt;br&gt;Image: grafana/loki:latest&lt;br&gt;Port: 3100:3100&lt;br&gt;Volume: loki-data:/loki&lt;br&gt;Config: ./loki:/etc/loki&lt;br&gt;&lt;br&gt;Command:&lt;br&gt;-config.file=/etc/loki/loki-config.yml" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9E6;strokeColor=#D79B00;fontSize=11;align=left;" vertex="1" parent="1">
          <mxGeometry x="840" y="340" width="260" height="180" as="geometry" />
        </mxCell>
        
        <!-- Container: Tempo -->
        <mxCell id="c-tempo" value="tempo&lt;br&gt;&lt;br&gt;Image: grafana/tempo:latest&lt;br&gt;Port: 3200:3200&lt;br&gt;Volume: tempo-data:/var/tempo&lt;br&gt;Config: ./tempo:/etc/tempo&lt;br&gt;&lt;br&gt;Command:&lt;br&gt;-config.file=/etc/tempo/tempo-config.yml" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#8E24AA;fontSize=11;align=left;" vertex="1" parent="1">
          <mxGeometry x="1120" y="340" width="260" height="180" as="geometry" />
        </mxCell>
        
        <!-- Container: OTel Collector -->
        <mxCell id="c-otel" value="alloy-agent&lt;br&gt;&lt;br&gt;Image: grafana/alloy:latest&lt;br&gt;Ports:&lt;br&gt;  4317:4317 (gRPC)&lt;br&gt;  4318:4318 (HTTP)&lt;br&gt;  12345:12345 (UI)&lt;br&gt;Volume: ./alloy:/etc/alloy&lt;br&gt;&lt;br&gt;Role: Unified Collector" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#8E24AA;fontSize=11;align=left;" vertex="1" parent="1">
          <mxGeometry x="240" y="560" width="260" height="180" as="geometry" />
        </mxCell>
        
        <!-- Container: Alertmanager -->
        <mxCell id="c-alertmanager" value="alertmanager&lt;br&gt;&lt;br&gt;Image: prom/alertmanager:latest&lt;br&gt;Port: 9093:9093&lt;br&gt;Volume: alertmanager-data:/alertmanager&lt;br&gt;Config: ./alertmanager:/etc/alertmanager&lt;br&gt;&lt;br&gt;Env:&lt;br&gt;TELEGRAM_BOT_TOKEN&lt;br&gt;TELEGRAM_CHAT_ID" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#B85450;fontSize=11;align=left;" vertex="1" parent="1">
          <mxGeometry x="540" y="560" width="260" height="180" as="geometry" />
        </mxCell>
        
        <!-- Container: Promtail -->
        <mxCell id="c-promtail" value="mimir&lt;br&gt;&lt;br&gt;Image: grafana/mimir:latest&lt;br&gt;Port: 9009:9009&lt;br&gt;Volume: ./mimir-config:/etc/mimir&lt;br&gt;&lt;br&gt;Role: Long-term Metrics&lt;br&gt;Storage: S3 (MinIO)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF4E6;strokeColor=#D79B00;fontSize=11;align=left;" vertex="1" parent="1">
          <mxGeometry x="840" y="560" width="260" height="180" as="geometry" />
        </mxCell>
        
        <!-- Container: DB Exporters -->
        <mxCell id="c-db-exporters" value="Database Exporters&lt;br&gt;&lt;br&gt;mongodb-exporter-ptit&lt;br&gt;  Image: percona/mongodb_exporter:0.40&lt;br&gt;  Port: 9216:9216&lt;br&gt;&lt;br&gt;postgres-exporter-ptit&lt;br&gt;  Image: bitnami/postgres-exporter&lt;br&gt;  Port: 9187:9187&lt;br&gt;&lt;br&gt;Env: MONGODB_URI, POSTGRES_DSN" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#82B366;fontSize=11;align=left;" vertex="1" parent="1">
          <mxGeometry x="1120" y="560" width="260" height="180" as="geometry" />
        </mxCell>
        
        <!-- Docker Network -->
        <mxCell id="docker-network" value="Docker Network: monitoring (bridge)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="780" width="1140" height="40" as="geometry" />
        </mxCell>
        
        <!-- Volumes -->
        <mxCell id="volumes-label" value="PERSISTENT VOLUMES" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="840" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="volumes-list" value="• prometheus-data (15 days)&lt;br&gt;• minio-data (S3 Storage)&lt;br&gt;  - Mimir (1+ year)&lt;br&gt;  - Loki (30 days)&lt;br&gt;  - Tempo (7 days)&lt;br&gt;• grafana-data&lt;br&gt;• alertmanager-data" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="480" y="840" width="300" height="100" as="geometry" />
        </mxCell>
        
        <!-- ========== MONITORED SERVERS ========== -->
        <mxCell id="monitored-label" value="MONITORED SERVERS (6 Servers)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1500" y="180" width="1300" height="40" as="geometry" />
        </mxCell>
        
        <!-- App Server 01 -->
        <mxCell id="app-01" value="APP SERVER 01" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DAE8FC;strokeColor=#6C8EBF;fontSize=14;fontStyle=1;verticalAlign=top;align=center;" vertex="1" parent="1">
          <mxGeometry x="1500" y="240" width="380" height="260" as="geometry" />
        </mxCell>
        
        <mxCell id="app-01-info" value="IP: 10.170.100.210&lt;br&gt;OS: Ubuntu 22.04&lt;br&gt;Role: Application Server&lt;br&gt;&lt;br&gt;Exporters:&lt;br&gt;• Node Exporter :9100&lt;br&gt;• cAdvisor :8080&lt;br&gt;&lt;br&gt;Applications:&lt;br&gt;• NestJS Backend&lt;br&gt;  - Pino Logger → Loki&lt;br&gt;  - OTel SDK → Collector&lt;br&gt;  - Metrics :3000/metrics" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1540" y="280" width="300" height="200" as="geometry" />
        </mxCell>
        
        <!-- App Server 02 -->
        <mxCell id="app-02" value="APP SERVER 02" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DAE8FC;strokeColor=#6C8EBF;fontSize=14;fontStyle=1;verticalAlign=top;align=center;" vertex="1" parent="1">
          <mxGeometry x="1920" y="240" width="380" height="260" as="geometry" />
        </mxCell>
        
        <mxCell id="app-02-info" value="IP: 10.170.100.181&lt;br&gt;OS: Ubuntu 22.04&lt;br&gt;Role: Application Server&lt;br&gt;&lt;br&gt;Exporters:&lt;br&gt;• Node Exporter :9100&lt;br&gt;• cAdvisor :8080&lt;br&gt;&lt;br&gt;Applications:&lt;br&gt;• NestJS Backend&lt;br&gt;  - Pino Logger → Loki&lt;br&gt;  - OTel SDK → Collector&lt;br&gt;  - Metrics :3000/metrics" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1960" y="280" width="300" height="200" as="geometry" />
        </mxCell>
        
        <!-- MongoDB Server -->
        <mxCell id="db-mongo" value="DATABASE SERVER (MongoDB)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=14;fontStyle=1;verticalAlign=top;align=center;" vertex="1" parent="1">
          <mxGeometry x="2340" y="240" width="380" height="260" as="geometry" />
        </mxCell>
        
        <mxCell id="db-mongo-info" value="IP: 10.170.100.88&lt;br&gt;OS: Ubuntu 22.04&lt;br&gt;Role: Database Server&lt;br&gt;&lt;br&gt;Exporters:&lt;br&gt;• Node Exporter :9100&lt;br&gt;• MongoDB Exporter :9216&lt;br&gt;&lt;br&gt;Database:&lt;br&gt;• MongoDB :27017&lt;br&gt;  - Profiling enabled&lt;br&gt;  - Slow query logs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="2380" y="280" width="300" height="200" as="geometry" />
        </mxCell>
        
        <!-- PostgreSQL Server -->
        <mxCell id="db-postgres" value="DATABASE SERVER (PostgreSQL)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=14;fontStyle=1;verticalAlign=top;align=center;" vertex="1" parent="1">
          <mxGeometry x="1500" y="540" width="380" height="260" as="geometry" />
        </mxCell>
        
        <mxCell id="db-postgres-info" value="IP: 10.170.100.24&lt;br&gt;OS: Ubuntu 22.04&lt;br&gt;Role: Database Server&lt;br&gt;&lt;br&gt;Exporters:&lt;br&gt;• Node Exporter :9100&lt;br&gt;• PostgreSQL Exporter :9187&lt;br&gt;&lt;br&gt;Database:&lt;br&gt;• PostgreSQL :5432&lt;br&gt;  - Log all statements&lt;br&gt;  - Slow query logs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1540" y="580" width="300" height="200" as="geometry" />
        </mxCell>
        
        <!-- Web Server 01 -->
        <mxCell id="web-01" value="WEB SERVER 01" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#D79B00;fontSize=14;fontStyle=1;verticalAlign=top;align=center;" vertex="1" parent="1">
          <mxGeometry x="1920" y="540" width="380" height="260" as="geometry" />
        </mxCell>
        
        <mxCell id="web-01-info" value="IP: 10.170.100.180&lt;br&gt;OS: Ubuntu 22.04&lt;br&gt;Role: Web Server&lt;br&gt;&lt;br&gt;Exporters:&lt;br&gt;• Node Exporter :9100&lt;br&gt;• Nginx Exporter :9113&lt;br&gt;• cAdvisor :8080&lt;br&gt;&lt;br&gt;Web Server:&lt;br&gt;• Nginx :80, :443&lt;br&gt;  - Access logs&lt;br&gt;  - Error logs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1960" y="580" width="300" height="200" as="geometry" />
        </mxCell>
        
        <!-- Web Server 02 -->
        <mxCell id="web-02" value="WEB SERVER 02" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#D79B00;fontSize=14;fontStyle=1;verticalAlign=top;align=center;" vertex="1" parent="1">
          <mxGeometry x="2340" y="540" width="380" height="260" as="geometry" />
        </mxCell>
        
        <mxCell id="web-02-info" value="IP: 10.170.100.182&lt;br&gt;OS: Ubuntu 22.04&lt;br&gt;Role: Web Server&lt;br&gt;&lt;br&gt;Exporters:&lt;br&gt;• Node Exporter :9100&lt;br&gt;• Nginx Exporter :9113&lt;br&gt;• cAdvisor :8080&lt;br&gt;&lt;br&gt;Web Server:&lt;br&gt;• Nginx :80, :443&lt;br&gt;  - Access logs&lt;br&gt;  - Error logs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="2380" y="580" width="300" height="200" as="geometry" />
        </mxCell>
        
        <!-- Network Connections -->
        <mxCell id="conn-label" value="NETWORK CONNECTIONS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="960" width="300" height="30" as="geometry" />
        </mxCell>
        
        <!-- Metrics Scraping -->
        <mxCell id="arrow-scrape-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF0000;strokeWidth=2;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="c-prometheus" target="app-01">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="370" y="920" />
              <mxPoint x="1690" y="920" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-scrape-1-label" value="SCRAPE :9100, :8080, :3000/metrics" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#FF0000;" vertex="1" connectable="0" parent="arrow-scrape-1">
          <mxGeometry x="-0.2" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow-scrape-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF0000;strokeWidth=2;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="c-prometheus" target="db-mongo">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="370" y="920" />
              <mxPoint x="2530" y="920" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow-scrape-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF0000;strokeWidth=2;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="c-prometheus" target="web-01">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="370" y="920" />
              <mxPoint x="2110" y="920" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- Logs/Traces Push -->
        <mxCell id="arrow-push-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#0000FF;strokeWidth=2;" edge="1" parent="1" source="app-01" target="c-loki">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1690" y="1000" />
              <mxPoint x="970" y="1000" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-push-1-label" value="PUSH LOGS :3100" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#0000FF;" vertex="1" connectable="0" parent="arrow-push-1">
          <mxGeometry x="-0.2" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow-push-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#9C27B0;strokeWidth=2;" edge="1" parent="1" source="app-01" target="c-otel">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1690" y="1040" />
              <mxPoint x="370" y="1040" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-push-2-label" value="PUSH TRACES :4317/:4318" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#9C27B0;" vertex="1" connectable="0" parent="arrow-push-2">
          <mxGeometry x="-0.2" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- ========== FIREWALL RULES ========== -->
        <mxCell id="firewall-box" value="FIREWALL RULES" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#FBC02D;fontSize=18;fontStyle=1;verticalAlign=top;align=center;" vertex="1" parent="1">
          <mxGeometry x="200" y="1120" width="1200" height="320" as="geometry" />
        </mxCell>
        
        <mxCell id="firewall-inbound" value="MONITORING SERVER - Inbound Rules" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#82B366;fontSize=13;fontStyle=1;verticalAlign=top;align=left;" vertex="1" parent="1">
          <mxGeometry x="240" y="1180" width="520" height="220" as="geometry" />
        </mxCell>
        
        <mxCell id="firewall-inbound-text" value="Port 3000 (TCP) - Grafana UI&lt;br&gt;  Source: User IPs&lt;br&gt;  Purpose: Web interface access&lt;br&gt;&lt;br&gt;Port 3100 (TCP) - Loki&lt;br&gt;  Source: Monitored servers&lt;br&gt;  Purpose: Receive logs&lt;br&gt;&lt;br&gt;Port 4317 (TCP) - OTel Collector (gRPC)&lt;br&gt;  Source: Monitored servers&lt;br&gt;  Purpose: Receive traces&lt;br&gt;&lt;br&gt;Port 4318 (TCP) - OTel Collector (HTTP)&lt;br&gt;  Source: Monitored servers&lt;br&gt;  Purpose: Receive traces" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="280" y="1220" width="440" height="160" as="geometry" />
        </mxCell>
        
        <mxCell id="firewall-outbound" value="MONITORING SERVER - Outbound Rules" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6E6;strokeColor=#B85450;fontSize=13;fontStyle=1;verticalAlign=top;align=left;" vertex="1" parent="1">
          <mxGeometry x="820" y="1180" width="520" height="220" as="geometry" />
        </mxCell>
        
        <mxCell id="firewall-outbound-text" value="Port 9100 (TCP) - Node Exporter&lt;br&gt;  Destination: All monitored servers&lt;br&gt;  Purpose: Scrape system metrics&lt;br&gt;&lt;br&gt;Port 8080 (TCP) - cAdvisor&lt;br&gt;  Destination: Container servers&lt;br&gt;  Purpose: Scrape container metrics&lt;br&gt;&lt;br&gt;Port 9113 (TCP) - Nginx Exporter&lt;br&gt;  Destination: Web servers&lt;br&gt;  Purpose: Scrape nginx metrics&lt;br&gt;&lt;br&gt;Port 9216/9187 (TCP) - DB Exporters&lt;br&gt;  Destination: Database servers&lt;br&gt;  Purpose: Scrape database metrics" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="860" y="1220" width="440" height="160" as="geometry" />
        </mxCell>
        
        <!-- ========== DEPLOYMENT NOTES ========== -->
        <mxCell id="notes-box" value="DEPLOYMENT NOTES" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FF;strokeColor=#1976D2;fontSize=18;fontStyle=1;verticalAlign=top;align=center;" vertex="1" parent="1">
          <mxGeometry x="1500" y="860" width="1220" height="580" as="geometry" />
        </mxCell>
        
        <mxCell id="notes-requirements" value="SYSTEM REQUIREMENTS" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1540" y="920" width="300" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="notes-requirements-text" value="Monitoring Server:&lt;br&gt;• CPU: 8 cores (min 4)&lt;br&gt;• RAM: 16 GB (min 8 GB)&lt;br&gt;• Disk: 500 GB SSD (min 200 GB)&lt;br&gt;• Network: 10 Gbps (min 1 Gbps)&lt;br&gt;&lt;br&gt;Monitored Servers:&lt;br&gt;• CPU: &lt;1% overhead&lt;br&gt;• RAM: ~50-200 MB per exporter&lt;br&gt;• Disk: ~100 MB for binaries" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1540" y="960" width="540" height="180" as="geometry" />
        </mxCell>
        
        <mxCell id="notes-retention" value="RETENTION POLICIES" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1540" y="1160" width="300" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="notes-retention-text" value="• Metrics (Prometheus): 15 days (Hot)&lt;br&gt;• Metrics (Mimir): 1 year (Cold - S3)&lt;br&gt;• Logs (Loki): 30 days (S3)&lt;br&gt;• Traces (Tempo): 7 days (S3)&lt;br&gt;&lt;br&gt;Configurable via:&lt;br&gt;• Mimir: Retention period&lt;br&gt;• Loki: retention_period (1 month)&lt;br&gt;• Tempo: block_retention (168h)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1540" y="1200" width="540" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="notes-storage" value="STORAGE ESTIMATES" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="2140" y="920" width="300" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="notes-storage-text" value="For 6 monitored servers:&lt;br&gt;&lt;br&gt;Prometheus:&lt;br&gt;• ~1000 metrics/target&lt;br&gt;• 15s scrape interval&lt;br&gt;• 15 days retention&lt;br&gt;• Estimated: 10-30 GB&lt;br&gt;&lt;br&gt;Loki:&lt;br&gt;• ~100 logs/sec total&lt;br&gt;• 7 days retention&lt;br&gt;• Estimated: 5-15 GB (compressed)&lt;br&gt;&lt;br&gt;Tempo:&lt;br&gt;• ~50 traces/sec&lt;br&gt;• 7 days retention&lt;br&gt;• Estimated: 2-8 GB" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="2140" y="960" width="540" height="260" as="geometry" />
        </mxCell>
        
        <mxCell id="notes-deployment" value="DEPLOYMENT STEPS" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="2140" y="1240" width="300" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="notes-deployment-text" value="1. Monitoring Server:&lt;br&gt;   • Install Docker + Docker Compose&lt;br&gt;   • Clone repository&lt;br&gt;   • Configure .env file&lt;br&gt;   • Update target JSON files&lt;br&gt;   • Run: docker compose up -d&lt;br&gt;&lt;br&gt;2. Monitored Servers:&lt;br&gt;   • Install exporters (node, cadvisor, etc.)&lt;br&gt;   • Configure firewall rules&lt;br&gt;   • Verify exporters running&lt;br&gt;&lt;br&gt;3. Verification:&lt;br&gt;   • Check Prometheus targets&lt;br&gt;   • View Grafana dashboards&lt;br&gt;   • Test alerting" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="2140" y="1280" width="540" height="140" as="geometry" />
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend-box" value="LEGEND" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;fontSize=14;fontStyle=1;verticalAlign=top;align=left;" vertex="1" parent="1">
          <mxGeometry x="200" y="1500" width="1200" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-metrics" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF0000;strokeWidth=2;dashed=1;dashPattern=8 8;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="240" y="1550" as="sourcePoint" />
            <mxPoint x="340" y="1550" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-metrics-text" value="Metrics Scraping (Pull)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="360" y="1535" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-logs" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#0000FF;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="600" y="1550" as="sourcePoint" />
            <mxPoint x="700" y="1550" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-logs-text" value="Logs Push" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="720" y="1535" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-traces" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#9C27B0;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="960" y="1550" as="sourcePoint" />
            <mxPoint x="1060" y="1550" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-traces-text" value="Traces Push" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1080" y="1535" width="200" height="30" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
