server:
  http_listen_port: 9080
  grpc_listen_port: 0

positions:
  filename: /tmp/positions.yaml

clients:
  - url: ${LOKI_URL}
    tenant_id: ${LOKI_TENANT_ID}

scrape_configs:
  - job_name: app-files
    static_configs:
      - targets: [localhost]
        labels:
          job: app
          service: ${APP_NAME}
          instance: ${INSTANCE}
          __path__: ${LOG_PATH}

    pipeline_stages:
      - json:
          expressions:
            level: level
            trace_id: trace_id
            span_id: span_id
            msg: msg
      - regex:
          expression: '(?i)(trace[_-]?id|traceId)[=:"\s]+(?P<trace_id>[a-f0-9]{16,32})'

      - labels:
          level:
          trace_id:
          span_id:
